import{_ as i,I as p,c as l,o as e,j as n,J as r,a9 as t,a as h,c1 as c,c2 as k,c3 as d,c4 as b,c5 as g,c6 as u,c7 as o,c8 as m,c9 as y,ca as F,cb as E,cc as C}from"./chunks/framework.Dp2GimK2.js";const q=JSON.parse('{"title":"SSH & Git","description":"","frontmatter":{},"headers":[],"relativePath":"programming/build-env/ssh-git/index.md","filePath":"programming/build-env/ssh-git/index.md","lastUpdated":1765356475000}'),f={name:"programming/build-env/ssh-git/index.md"};function _(v,s,B,D,A,x){const a=p("ArticleMetadata");return e(),l("div",null,[s[0]||(s[0]=n("h1",{id:"ssh-git",tabindex:"-1"},[h("SSH & Git "),n("a",{class:"header-anchor",href:"#ssh-git","aria-label":"Permalink to “SSH & Git”"},"​")],-1)),r(a),s[1]||(s[1]=t(`<p>公司一般会有自己的 Git 服务器，我们通过创建 SSH Key 并将公钥上传到服务器来实现免密登录，从而方便我们进行代码的拉取和推送操作，不过我们也会使用 GitHub、GitLab 等第三方代码托管平台，同样也是通过 SSH Key 来实现免密登录。</p><p>现在我想实现在不同的项目中，能够自动切换不同的 SSH Key，从而使用不同的身份进行代码的拉取和推送操作。</p><h2 id="_1-生成-ssh-key" tabindex="-1">1.生成 SSH Key <a class="header-anchor" href="#_1-生成-ssh-key" aria-label="Permalink to “1.生成 SSH Key”">​</a></h2><p>SSH Key 的类型有很多种，其中<code>ed25519</code>是目前最安全、加解密速度最快的类型，由于其数学特性，它的 key 长度比 rsa 小很多，优先推荐使用。这里我们使用<code>ed25519</code>类型来生成 SSH Key。</p><p>命令：<code>ssh-keygen -t xxx -f xxx -C &quot;xxx&quot;</code>：</p><ul><li><code>-t</code>：指定生成的密钥类型，如 rsa、ed25519...。</li><li><code>-f</code>：指定生成的密钥文件存放路径和名称。</li><li><code>-C</code>：为生成的密钥添加注释，通常使用邮箱地址。</li></ul><p>生成两对 SSH Key，分别用于 GitHub 和工作环境（假设我的公司是 Authing）：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 为 github 生成一对密钥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ed25519</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519_github</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;yolk23321@163.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 为工作环境生成一对密钥，（邮箱换成工作邮箱）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ed25519</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519_authing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;huangqiang@authing.com&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="`+c+'" alt="" loading="lazy"></p><p>这里是确认是否需要给私钥再加一层&quot;密码保护&quot;，直接回车，表示不设置密码，否则输入一个密码，表示以后每次用这个私钥连接服务器时，系统都会要求输入这段密码，所以这里回车即可。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-45" id="tab-46" checked><label data-title="&lt;1&gt;" for="tab-46">&lt;1&gt;</label><input type="radio" name="group-45" id="tab-47"><label data-title="&lt;2&gt;" for="tab-47">&lt;2&gt;</label></div><div class="blocks"><div class="rendered-md"><p><img src="'+k+'" alt="" loading="lazy"></p></div><div class="rendered-md"><p><img src="'+d+'" alt="" loading="lazy"></p></div></div></div><p>查看<code>~/.ssh/</code>目录下生成的密钥文件（4 个文件）：</p><p><img src="'+b+'" alt="" loading="lazy"></p><h2 id="_2-添加公钥到对应的-git-服务器" tabindex="-1">2.添加公钥到对应的 Git 服务器 <a class="header-anchor" href="#_2-添加公钥到对应的-git-服务器" aria-label="Permalink to “2.添加公钥到对应的 Git 服务器”">​</a></h2><p>下文以 github 为例，公司的 Git 服务器操作类似。</p><ol><li><p>复制id_ed25519_github.pub文件内容：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pbcopy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519_github.pub</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>解释下为什么是公钥，因为我们是要向 git 仓库拉取和推送代码，那么我们是发送消息方，而 git 仓库需要确认此请求是来自我们。</p></blockquote></li><li><p>在平台上粘贴公钥：</p><p><img src="'+g+`" alt="" loading="lazy"></p></li></ol><h2 id="_3-将多个私钥添加到-ssh-agent" tabindex="-1">3.将多个私钥添加到 SSH Agent <a class="header-anchor" href="#_3-将多个私钥添加到-ssh-agent" aria-label="Permalink to “3.将多个私钥添加到 SSH Agent”">​</a></h2><p><code>ssh-agent</code>是一个在后台运行的<strong>钥匙串服务</strong>，可以把私钥（和它的解锁密码，如果设置了<code>passphrase</code>）加载进去，之后任何需要用这个私钥的程序（例如 ssh 或 git）都会去问 ssh-agent 拿，而不用你每次手动输入。</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519_github</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -K</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519_authing</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="`+u+`" alt="" loading="lazy"></p><p>不过 ssh-agent 有一个缺点，就是在系统重启后，之前添加的<strong>私钥会丢失</strong>，需要<strong>重新添加</strong>，这里使用一个脚本来实现自动添加私钥，编辑<code>~/.zshrc</code>文件，添加如下内容：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 加入密钥到 ssh-agent 中</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$SSH_AUTH_SOCK</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] ; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    eval</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-agent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 只加入存在且可读的文件，并排除公钥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [[ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.pub ]]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">then</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        ssh-add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/dev/null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-配置-ssh-客户端" tabindex="-1">4.配置 SSH 客户端 <a class="header-anchor" href="#_4-配置-ssh-客户端" aria-label="Permalink to “4.配置 SSH 客户端”">​</a></h2><p>SSH 客户端的配置文件是<code>~/.ssh/config</code>，这个文件可以用来为不同的主机配置不同的连接选项，比如指定不同的端口、用户名、使用的私钥文件等。</p><p>执行命令：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果不存在则创建文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/config</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>添加如下内容：</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Host github</span></span>
<span class="line"><span>  HostName github.com</span></span>
<span class="line"><span>  IdentityFile ~/.ssh/id_ed25519_github</span></span>
<span class="line"><span>  User git</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Host authing</span></span>
<span class="line"><span>  HostName gitlab.authing-inc.co</span></span>
<span class="line"><span>  IdentityFile ~/.ssh/id_ed25519_authing</span></span>
<span class="line"><span>  User git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>Host</code>：这是一个别名，可以是任意名称，用于在连接时引用该主机配置。</li><li><code>HostName</code>：这是实际的主机名或 IP 地址，用于连接到远程服务器。</li><li><code>IdentityFile</code>：指定用于该主机的私钥文件路径。</li><li><code>User</code>：指定连接到远程服务器时使用的用户名，如果是 Git 服务器，通常是<code>git</code>。</li></ul><h2 id="_5-测试链接" tabindex="-1">5.测试链接 <a class="header-anchor" href="#_5-测试链接" aria-label="Permalink to “5.测试链接”">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -T</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+o+'" alt="" loading="lazy"></p><p>当你第一次连接到一个新主机时，你的电脑里没有它的记录，所以它无法自动验证对方的真实身份。因此，它必须停下来向你确认，输入<code>yes</code>即可：</p><p><img src="'+m+'" alt="" loading="lazy"></p><p>公司的 Git 服务器测试同理：</p><p><img src="'+y+`" alt="" loading="lazy"></p><h2 id="_6-为不同的-git-服务器添加对应的配置文件" tabindex="-1">6.为不同的 Git 服务器添加对应的配置文件 <a class="header-anchor" href="#_6-为不同的-git-服务器添加对应的配置文件" aria-label="Permalink to “6.为不同的 Git 服务器添加对应的配置文件”">​</a></h2><ol><li><p>删除 Git 已经配置的用户名和邮箱</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --unset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.email</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --unset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>为 GitHub 添加配置文件<code>~/.gitconfig_github</code>，内容如下：</p><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[user]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = yolk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = yolk23321@163.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>为公司的 Git 服务器添加配置文件<code>~/.gitconfig_authing</code>，内容如下：</p><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[user]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = huangqiang</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = huangqiang@authing.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>打开 Git 全局配置文件<code>~/.gitconfig</code>，添加如下内容：</p><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[user]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = test@gmail.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[includeIf &quot;gitdir:/Users/yolk/Develops/code/vscode/authing/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitconfig_authing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[includeIf &quot;gitdir:/Users/yolk/Develops/code/idea/authing/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitconfig_authing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[includeIf &quot;gitdir:/Users/yolk/Develops/code/vscode/github/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitconfig_github</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>第一个<code>[user]</code>配置是一个默认的用户信息，当你在不匹配任何<code>includeIf</code>条件的仓库中提交代码时，会使用这个默认的用户信息。</p><p>后面的三个<code>[includeIf]</code>是我按照自己的风格放到不同的文件夹下进行分类而定义的，所以可以按照自己的情况自行追加多个<code>[includeIf]</code>。</p><p><code>path</code>配置项是指使用哪个<code>gitconfig</code>，这样就能在不同项目中实现 git 配置区分。</p><blockquote><p><strong>注意</strong>：<code>gitdir</code>后面的路径需要以斜杠<code>/</code>结尾，表示这是一个目录。</p></blockquote></li><li><p>进入不同的项目目录，进行测试</p><ol><li><p>进入<code>/Users/yolk/Develops/code/vscode/authing/</code>目录下，执行如下命令：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 创建一个项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test-authing</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test-test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 查看配置是否符合预期（输出的用户名应该是\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">~/.gitconfig_authing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">文件中配置的）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user.name</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="`+F+'" alt="" loading="lazy"></p></li><li><p>进入<code>/Users/yolk/Develops/code/vscode/github/</code>目录下，依旧同上，输出的用户名应该是<code>yolk</code>：</p><p><img src="'+E+'" alt="" loading="lazy"></p></li><li><p>进入不是上面 3 个配置的路径中一个项目，输出的用户名应该是默认的配置<code>test</code>：</p><p><img src="'+C+`" alt="" loading="lazy"></p></li></ol></li><li><p>至此已经完成 Git 多账户配置，最后给一份我的<code>~/.gitconfig</code>配置：</p><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[user]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = yolk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = yolk23321@163.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[includeIf &quot;gitdir:/Users/yolk/Develops/code/vscode/authing/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitconfig_authing</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[includeIf &quot;gitdir:/Users/yolk/Develops/code/idea/authing/&quot;]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitconfig_authing</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[core]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    pager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = delta</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    autocrlf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = input</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    excludesfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = ~/.gitignore_global</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[pull]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    rebase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[push]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = current</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[fetch]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    prune</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[color]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ui</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = auto</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><code>~/.gitignore_global</code>内容：</p><div class="language-gitignore line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">gitignore</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>### macOS ###</span></span>
<span class="line"><span>.DS_Store</span></span>
<span class="line"><span>.AppleDouble</span></span>
<span class="line"><span>.LSOverride</span></span>
<span class="line"><span>__MACOSX/</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Icon must end with two \\r</span></span>
<span class="line"><span>Icon</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>### JetBrains IDEs (IntelliJ IDEA, GoLand, PyCharm, etc.) ###</span></span>
<span class="line"><span>.idea/</span></span>
<span class="line"><span>*.iml</span></span>
<span class="line"><span>*.ipr</span></span>
<span class="line"><span>*.iws</span></span>
<span class="line"><span>out/</span></span>
<span class="line"><span># Plugin-specific</span></span>
<span class="line"><span>.idea_modules/</span></span>
<span class="line"><span>.idea/**/workspace.xml</span></span>
<span class="line"><span>.idea/**/tasks.xml</span></span>
<span class="line"><span>.idea/**/dictionaries</span></span>
<span class="line"><span>.idea/**/shelf</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>### VSCode ###</span></span>
<span class="line"><span>.vscode/</span></span>
<span class="line"><span>.history/</span></span>
<span class="line"><span>*.code-workspace</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>### Java ###</span></span>
<span class="line"><span>*.class</span></span>
<span class="line"><span>*.log</span></span>
<span class="line"><span>*.ctxt</span></span>
<span class="line"><span>*.jar</span></span>
<span class="line"><span>*.war</span></span>
<span class="line"><span>*.ear</span></span>
<span class="line"><span>hs_err_pid*</span></span>
<span class="line"><span>replay_pid*</span></span>
<span class="line"><span># Gradle</span></span>
<span class="line"><span>.gradle/</span></span>
<span class="line"><span>build/</span></span>
<span class="line"><span>.java-version</span></span>
<span class="line"><span># Maven</span></span>
<span class="line"><span>target/</span></span>
<span class="line"><span>dependency-reduced-pom.xml</span></span>
<span class="line"><span># Eclipse leftovers</span></span>
<span class="line"><span>.project</span></span>
<span class="line"><span>.classpath</span></span>
<span class="line"><span>.settings/</span></span>
<span class="line"><span>bin/</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>### JavaScript / Node.js ###</span></span>
<span class="line"><span>node_modules/</span></span>
<span class="line"><span>npm-debug.log*</span></span>
<span class="line"><span>yarn-debug.log*</span></span>
<span class="line"><span>yarn-error.log*</span></span>
<span class="line"><span>.pnpm-debug.log*</span></span>
<span class="line"><span>.next/</span></span>
<span class="line"><span>dist/</span></span>
<span class="line"><span>coverage/</span></span>
<span class="line"><span>.cache/</span></span>
<span class="line"><span>.parcel-cache/</span></span>
<span class="line"><span>.nyc_output/</span></span>
<span class="line"><span>storybook-static/</span></span>
<span class="line"><span>.babel-cache/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### Python ###</span></span>
<span class="line"><span>__pycache__/</span></span>
<span class="line"><span>*.py[cod]</span></span>
<span class="line"><span>*.pyo</span></span>
<span class="line"><span>*.pyd</span></span>
<span class="line"><span>*.so</span></span>
<span class="line"><span>*.egg</span></span>
<span class="line"><span>*.egg-info/</span></span>
<span class="line"><span>.eggs/</span></span>
<span class="line"><span>build/</span></span>
<span class="line"><span>develop-eggs/</span></span>
<span class="line"><span>dist/</span></span>
<span class="line"><span>pip-wheel-metadata/</span></span>
<span class="line"><span>.tox/</span></span>
<span class="line"><span>.coverage</span></span>
<span class="line"><span>htmlcov/</span></span>
<span class="line"><span>.mypy_cache/</span></span>
<span class="line"><span>.pytest_cache/</span></span>
<span class="line"><span>.pyre/</span></span>
<span class="line"><span>.dmypy.json</span></span>
<span class="line"><span>.pytype/</span></span>
<span class="line"><span>.ipynb_checkpoints/</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>### Go ###</span></span>
<span class="line"><span># Binaries</span></span>
<span class="line"><span>*.exe</span></span>
<span class="line"><span>*.exe~</span></span>
<span class="line"><span>*.dll</span></span>
<span class="line"><span>*.so</span></span>
<span class="line"><span>*.dylib</span></span>
<span class="line"><span>*.test</span></span>
<span class="line"><span>*.out</span></span>
<span class="line"><span># Go workspace</span></span>
<span class="line"><span>bin/</span></span>
<span class="line"><span>pkg/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>### other ###</span></span>
<span class="line"><span>.hushlogin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br></div></div></li></ol>`,38))])}const H=i(f,[["render",_]]);export{q as __pageData,H as default};
