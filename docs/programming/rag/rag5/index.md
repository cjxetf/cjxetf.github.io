# 向量数据库选型

| 维度     | Milvus                | Faiss               | Elasticsearch          | Chroma               | Qdrant               |
|----------|-----------------------|---------------------|------------------------|----------------------|----------------------|
| 数据规模 | 支持PB级              | 单机GB~TB级         | 支持PB级               | 单机GB级             | 单机TB级             |
| 查询性能 | 高并发低延迟          | 离线批量检索        | 结构化检索高效         | 轻量级嵌入式检索     | 高精度多模态检索     |
| 算法支持 | IVF_FLAT、HNSW        | IndexFlatL2等       | BM25、向量检索混排     | FAISS集成            | PQ、HNSW             |
| 多模态   | 支持（需扩展）| 仅向量检索          | 支持文本/结构化        | 支持文本/图像        | 支持文本/图像        |
| 开源协议 | Apache 2.0            | MIT                 | SSPL                   | MIT                  | Apache 2.0           |



## 案例1：电商推荐系统（Milvus）

- 场景：某跨境电商品日均 UV 超千万，需实时推荐商品。用户行为数据（点击、加购、评论）需快速匹配商品向量。
- 痛点：
  1. 数据规模大（每日新增向量 10 亿+）；
  2. 查询延迟需控制在 50ms 内；
  3. 高并发场景下（峰值 QPS 5000+）稳定性要求高。
- 选型过程
  - 排除方案： Elasticsearch：文本检索强，但向量检索性能不足； Faiss：单机性能无法支撑 PB 级数据。
- 技术验证：
  Milvus 通过分片和分布式架构，单机支持百万 QPS，集群模式下线性扩展；
  IVF_FLAT 索引在召回率 95% 时，延迟稳定在 30ms。
- 实施效果
  部署 3 节点集群，日均处理 15 亿次查询；
  推荐准确率提升 12%，用户停留时长增加 25%。
## 案例2：医疗知识库（Qdrant）

- 场景：某三甲医院需构建基于医学文献的知识库，支持医生通过症状、影像快速检索相关病例和研究论文。
- 痛点：
  1. 数据敏感性要求高（需私有化部署）；
  2. 查询需结合文本（症状描述）和图像（CT 影像）；
  3. 多模态检索精度需 > 90%。
- 选型过程
  - 技术选型： Qdrant 支持文本/图像多模态检索，且提供私有化部署； 对比 Chroma，Qdrant 在多模态混合检索中准确率提升 8%。
  - 优化方案： 使用 ResNet50 提取影像特征，BERT 处理文本特征； 结合余弦相似度和跨模态注意力机制优化排序。
- 实施效果
  - 病例检索召回率 92%，影像匹配准确率 89%；
  - 医生诊断效率提升 30%，系统通过等保三级认证。
## 案例3：企业知识库（Chroma）
- 场景：某科技企业需为 1000+ 员工提供技术文档检索服务，支持代码片段、API 文档的快速匹配。
- 痛点：
  1. 数据量较小（百万级文档）；
  2. 需要低延迟（<100ms）的嵌入式检索；
  3. 开发团队需快速集成（无运维团队）。
- 选型过程
  - 技术选型： Chroma 轻量级部署，支持 Docker 一键启动； 对比 Milvus，Chroma 在百万级数据下查询延迟降低 40%。
  - 开发适配： 使用 LangChain 封装检索逻辑，支持 Prompt 工程； 结合 Contriever 模型微调，提升代码片段匹配精度。
- 实施效果
  - 文档检索准确率 91%，平均响应时间 85ms；
  - 开发周期缩短 50%，获评企业级技术创新奖。


## LVE 混合检索
- 背景：业务定制过滤需求较多（布隆过滤、城市过滤、生态过滤等），推荐还有分年龄段召回
- 局限：动态在线过滤性能消耗较多
- 解决方案：完整过滤/混合检索框架
  - 性能最佳：多类目离线构建（milvus, pinecone 最新解决方案），支持2w以内个类目的构建（未来希望能提高到几十万级别）
  - 前置过滤：倒排，正排filter-search，笔记年龄段过滤排序，自定义过滤函数
  - 后置过滤：支持自定义过滤函数开发，支持join kv/正排表
