import{_ as k,I as e,c as r,o as d,j as i,J as n,a9 as h,a,ed as E,w as p,ee as g,ef as c,eg as o,eh as b,ei as y,ej as u,ek as F,el as m,em as A,en as D,eo as C,ep as v,eq as S,er as B,es as f}from"./chunks/framework.Dp2GimK2.js";const H=JSON.parse('{"title":"WebSocket","description":"","frontmatter":{},"headers":[],"relativePath":"programming/protocol/websocket/basic/index.md","filePath":"programming/protocol/websocket/basic/index.md","lastUpdated":1765356475000}'),w={name:"programming/protocol/websocket/basic/index.md"};function x(q,s,W,_,j,O){const t=e("ArticleMetadata"),l=e("center");return d(),r("div",null,[s[8]||(s[8]=i("h1",{id:"websocket",tabindex:"-1"},[a("WebSocket "),i("a",{class:"header-anchor",href:"#websocket","aria-label":"Permalink to “WebSocket”"},"​")],-1)),n(t),s[9]||(s[9]=i("p",null,[i("img",{src:E,alt:"",loading:"lazy"})],-1)),s[10]||(s[10]=i("p",null,"过一段时间才打开微信，发现有很多消息未读，好友将消息发送给自己时，它们不是直接发送到自己的设备上，而是先发送到微信的服务器，然后再由服务器发送到自己的设备，那么服务端主动向客户端发送消息的功能是如何实现的呢？",-1)),s[11]||(s[11]=i("h2",{id:"_1-消息推送常见的方式",tabindex:"-1"},[a("1.消息推送常见的方式 "),i("a",{class:"header-anchor",href:"#_1-消息推送常见的方式","aria-label":"Permalink to “1.消息推送常见的方式”"},"​")],-1)),i("ul",null,[i("li",null,[s[1]||(s[1]=i("p",null,[i("strong",null,"轮询"),a("（Polling）：客户端定期向服务器发送请求，检查是否有新消息。这种方式简单但效率低下，因为即使没有新消息，客户端也会频繁发送请求，给服务器带来不必要的负担。")],-1)),n(l,null,{default:p(()=>[...s[0]||(s[0]=[i("img",{src:g,style:{"max-width":"50%"}},null,-1)])]),_:1})]),i("li",null,[s[3]||(s[3]=i("p",null,[a("长轮询（Long Polling）：客户端发送请求后，服务器"),i("strong",null,"保持连接"),a("直到有新消息或超时，然后服务器响应客户端。客户端接收到响应后，会立即发送新的请求以继续监听新消息。这样可以减少请求的频率，提高实时性，不过服务器需要维护更多的连接，增加了资源消耗。")],-1)),n(l,null,{default:p(()=>[...s[2]||(s[2]=[i("img",{src:c,style:{"max-width":"50%"}},null,-1)])]),_:1}),s[4]||(s[4]=i("blockquote",null,[i("p",null,[i("code",null,"HTTP/1.0"),a("默认是短连接，每次请求后连接都会关闭。")]),i("p",null,[i("code",null,"HTTP/1.1"),a("引入了持久连接（Persistent Connection），允许在同一连接上发送多个请求和响应，从而减少了连接建立和关闭的开销，长轮询就是利用了这一特性。")])],-1))]),i("li",null,[s[6]||(s[6]=i("p",null,[i("code",null,"SSE"),a("（Server-Sent Events）：服务器和客户端建立一个单向的持久连接，服务器可以通过这个连接向客户端推送消息。SSE 基于"),i("code",null,"HTTP"),a("协议，数据的格式不在是一次性的数据包，而是"),i("code",null,"text/event-stream"),a("类型的数据流信息，易于实现，但只支持服务器向客户端发送数据，不能实现双向通信。")],-1)),n(l,null,{default:p(()=>[...s[5]||(s[5]=[i("img",{src:o,style:{"max-width":"50%"}},null,-1)])]),_:1})])]),s[12]||(s[12]=h("",36)),n(l,null,{default:p(()=>[...s[7]||(s[7]=[i("img",{src:y,style:{"max-width":"50%"}},null,-1)])]),_:1}),s[13]||(s[13]=h("",85))])}const T=k(w,[["render",x]]);export{H as __pageData,T as default};
